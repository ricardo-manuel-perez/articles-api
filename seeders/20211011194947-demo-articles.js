"use strict";
const faker = require("faker");
const tableModel = { tableName: "Articles", schema: "articles" };
const userTable = { tableName: "Users", schema: "articles" };
const articles = [...Array(100)].map((article) => {
  const uid = faker.datatype.uuid();
  return {
    slug: "autogenerated-article-" + uid,
    title: "autogenerated article " + uid,
    description: faker.lorem.paragraph(),
    body: faker.lorem.paragraphs(15),
    UserEmail: "mock_user@gmail.com",
    createdAt: new Date(),
    updatedAt: new Date(),
  };
});

const mockUser = {
  email: "mock_user@gmail.com",
  username: "mock_user",
  bio: null,
  createdAt: new Date(),
  updatedAt: new Date(),
};

module.exports = {
  up: async (queryInterface, Sequelize) => {
    await queryInterface.bulkInsert(userTable, [mockUser], {});
    return await queryInterface.bulkInsert(tableModel, articles, {});
  },

  down: async (queryInterface, Sequelize) => {
    await queryInterface.bulkDelete(userTable, [mockUser], {});
    return await queryInterface.bulkDelete(tableModel, null, {});
  },
};
